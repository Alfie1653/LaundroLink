<!DOCTYPE html>
<html>
<head>
  <title>{{ provider.name }} - LaundroLink</title>
  <link rel="stylesheet" href="/static/service_page.css">
</head>
<body>

  <!-- PAGE WRAPPER WITH SIDE MARGINS -->
  <div class="page-wrapper">

    <!-- SERVICE HERO / TITLE -->
    <div class="service-hero">
      <a href="{{ url_for('home') }}" class="btn-back">Back</a>
      <h1>{{ provider.name }}</h1>
    </div>

    <!-- SERVICE MAIN CONTAINER -->
    <div class="service-container">
      <!-- LEFT: PROFILE IMAGE -->
      <div class="service-image">
        <img src="{{ url_for('static', filename='uploads/' + provider.profile_pic) }}" alt="{{ provider.name }}">
      </div>

      <!-- RIGHT: INFO PANEL -->
      <div class="service-info">
        <div class="area-row" style="display: flex; align-items: center; gap: 10px;">
          <h2 style="margin: 0;">Area:</h2>
          <p class="place" style="margin: 0;">{{ provider.area }}</p>
        </div>
        <h2>Price</h2>
        <p>KES {{ provider.price_per_kg }} per kg</p>

        <h2>Pickup / Delivery</h2>
        <p>
          {% if provider.delivery_fee %}
            Delivery available (KES {{ provider.delivery_fee }})  
          {% else %}
            Pickup available, no delivery fee  
          {% endif %}
        </p>

        <h2>Services Offered</h2>
        <p>{{ provider.services }}</p>

        {% if provider.rating %}
        <h2>Rating</h2>
        <p>⭐ {{ provider.rating }}/5</p>
        {% endif %}

        <!-- ADDITIONAL INFO SECTION -->
        <h2>Turnaround Time</h2>
        <p>Most laundry is ready within 24–48 hours.</p>

        <!-- REQUEST SERVICE BUTTON -->
        <div class="service-action">
          <a
            href="{{ url_for('request_service', provider_id=provider.id) }}"
            target="_blank"
            class="btn-request"
          >
            Request Service
          </a>
        </div>
      </div>
    </div>

    <!-- ==========================
         DESCRIPTION & FEEDBACK SECTIONS
    ========================== -->
    <div class="sections-container">

      <!-- Laundry Description -->
      <div class="section description-section">
        <h2>Laundry Description</h2>
        {% if provider.description %}
          <p>{{ provider.description }}</p>
        {% else %}
          <p>No description provided yet.</p>
        {% endif %}
      </div>

      <!-- Customer Feedback -->
      <div class="section feedback-section">
        <h2>Customer Feedback</h2>
        {% if feedbacks %}
          {% for f in feedbacks %}
            <div class="feedback-item">
              <p class="feedback-header">
                <strong>{{ f.customer_name }}</strong>:
                <span class="rating-stars">
                  {% for i in range(f.rating) %}★{% endfor %}
                  {% for i in range(5 - f.rating) %}☆{% endfor %}
                </span>
              </p>
              <p class="feedback-comment">{{ f.comment }}</p>
            </div>
          {% endfor %}
          <!-- See all reviews link -->
          <div style="margin-top: 10px;">
            <a href="{{ url_for('all_reviews', provider_id=provider.id) }}" class="btn-see-all">
              See all reviews
            </a>
          </div>
        {% else %}
          <p>No feedback yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
</body>
</html>
