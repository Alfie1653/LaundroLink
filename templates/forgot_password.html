<!DOCTYPE html>
<html>
<head>
    <title>Forgot Password</title>
    <link rel="stylesheet" href="/static/forgot_password.css">
</head>
<body>

<div class="dashboard-container">
    <h2>Forgot Password</h2>

    {% if reset_link %}
        <!-- Reset Link Section -->
        <p style="text-align:center; font-size:1.2em; margin-bottom:10px;">
            <a href="{{ reset_link }}">Click Here</a> to reset your password
        </p>
        <p style="text-align:center; font-size:0.9em; color: #555;">
            This link will expire in 5 minutes.
        </p>
    {% else %}
        <!-- Form Section -->
        <p style="text-align:center; margin-bottom:20px;">
            Enter your registered phone number.  
            A secure one-time password reset link will be generated for you.
            It is valid for 5 minutes.
        </p>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash-message {{ category }}">
                            {{ message|safe }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <form method="POST">
            <label for="phone">Phone Number</label>
            <div class="phone-group">
                <select name="country_code" required>
                    <option value="+254">+254 (KE)</option>
                    <option value="+1">+1 (USA)</option>
                    <option value="+44">+44 (UK)</option>
                    <option value="+256">+256 (UG)</option>
                    <option value="+255">+255 (TZ)</option>
                </select>

                <input
                    type="tel"
                    name="phone"
                    placeholder="712345678"
                    pattern="[0-9]{9}"
                    maxlength="9"
                    required
                >
            </div>

            <button type="submit" class="btn-update">
                Generate Reset Link
            </button>
        </form>

        <p style="text-align:center; margin-top:20px;">
            <a href="{{ url_for('login') }}">Back to Login</a>
        </p>
    {% endif %}
</div>

</body>
</html>
